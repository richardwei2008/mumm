<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>选择车手</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
    <meta content="telephone=no" name="format-detection"/>
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="black" name="apple-mobile-web-app-status-bar-style"/>
    <link href="css/jquery.mobile-1.4.3.css" rel="stylesheet" type="text/css"/>
    <link href="css/jquery.mobile.customize-1.4.3.css" rel="stylesheet" type="text/css"/>
    <link href="css/app.css" rel="stylesheet" type="text/css"/>

    <script src="js/json2.js" type="text/javascript"></script>
    <script src="js/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="js/jquery.serializejson-2.1.0.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.4.3.min.js" type="text/javascript"></script>
    <script src="js/beyond.wechat.share-0.1.js" type="text/javascript"></script>
    <script src="js/app-1.0.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(window).ready(function () {
            var openid = sessionStorage.getItem('openid');
            if (openid === null || openid === 'null') {
                openid = $.getUrlParam('openid');
            }
//            alert(openid);
            $("#submitBtn").click(function() {
                var cellphone = $("#cellphone").val();
                var racerChoice = $('input[name=racerChoice][checked=checked]').val(); // $("#racerChoice").val();
                var pubChoice = $('input[name=pubChoice][checked=checked]').val(); // $("#pubChoice").val();
                if ($.isEmptyObject(cellphone) || cellphone.length !== 11) {
                    $("#errorMsg").html("请完整输入11位手机号码：（XXX-XXXX-XXXX）");
                    $.mobile.changePage('#error', {transition: 'pop', role: 'dialog'});
                    return;
                }
                if ($.isEmptyObject(racerChoice)) {
                    $("#errorMsg").html("您还未选定车手信息，请返回重新选择");
                    $.mobile.changePage('#error', {transition: 'pop', role: 'dialog'});
                    return;
                }
                if ($.isEmptyObject(pubChoice)) {
                    $("#errorMsg").html("您还未选定酒吧信息，请返回重新选择");
                    $.mobile.changePage('#error', {transition: 'pop', role: 'dialog'});
                    return;
                }
                $.ajax({
                    async : false,
                    type : "POST", // "GET",
                    url: "services/CustomerService.php", // "index.html",
                    contentType: "application/x-www-form-urlencoded;charset=UTF-8",
                    timeout : 1000,
                    datatype : "json",
                    data: JSON.stringify({method : "POST", openid: openid, data : $("#mainForm").serializeJSON()}), // $("#mainForm").serialize(),
                    success : function(response) {
//                        alert(JSON.stringify(response));
                        if (response.success) {
                            window.location.href = window.location.href.substring(0, window.location.href.lastIndexOf('/')) + "/submitted.html";
                        } else {
                            switch (response.code) {
                                case 'E001':
                                    $("#errorMsg").html(response.message);
                                    break;
                                default :
                                    $("#errorMsg").html("未知错误，请联系管理员—" + JSON.stringify(response));
                                    break;
                            }
                            $.mobile.changePage('#error', {transition: 'pop', role: 'dialog'});
                        }
                    },
                    error : function (xhr, textStatus, errorThrown) {
//                        alert(xhr.responseText);
                        $("#fatalMsg").html(xhr.responseText);
                        $.mobile.changePage('#fatal', {transition: 'pop', role: 'dialog'});
                    }
                })
            });
        });

    </script>
</head>
<body style="background:#000;">

<form id="mainForm">
<div data-role="page" id="racerPage">
    <div data-role="content" data-position="fixed">
        <div align="center"><img src="images/top_racer.jpg" width="100%" border="0" hspace="0" vspace="0"/></div>
        <div class="custom-collapsibleset-bg"
                data-role="collapsibleset" data-inset="false" data-iconpos="right" data-expanded-icon="carat-d" data-collapsed-icon="carat-r">
            <div data-role="collapsible" data-collapsed="false">
                <h3 >英菲尼迪-红牛车队</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right" >
                    <input name="racerChoice" id="racer-1" type="radio" checked="checked" value="红牛车队-Sebastian Vettel">
                    <label for="racer-1" class="ui-radio-label-customized">维特尔</label>
                    <input name="racerChoice" id="racer-2" type="radio" value="红牛车队-Daniel Ricciardo">
                    <label for="racer-2" class="ui-radio-label-customized">里卡多</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >梅赛德斯车队</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right" >
                    <input name="racerChoice" id="racer-3" type="radio" value="梅赛德斯-Lewis Hamilton">
                    <label for="racer-3" class="ui-radio-label-customized">汉密尔顿</label>
                    <input name="racerChoice" id="racer-4" type="radio" value="梅赛德斯-Nico Rosberg">
                    <label for="racer-4" class="ui-radio-label-customized">罗斯伯格</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >法拉利车队</h3>
                <fieldset data-role="controlgroup"  data-corners="false" data-iconpos="right">
                    <input name="racerChoice" id="racer-5" type="radio" value="法拉利-Fernando Alonso">
                    <label for="racer-5" class="ui-radio-label-customized">阿隆索</label>
                    <input name="racerChoice" id="racer-6" type="radio" value="法拉利-Kimi Raikkonen">
                    <label for="racer-6" class="ui-radio-label-customized">莱科宁</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >路特斯F1车队</h3>
                <fieldset data-role="controlgroup"  data-corners="false" data-iconpos="right">
                    <input name="racerChoice" id="racer-7" type="radio" value="路特斯-Romain Grosjean">
                    <label for="racer-7" class="ui-radio-label-customized">格罗斯让</label>
                    <input name="racerChoice" id="racer-8" type="radio" value="路特斯-Pastor Maldonado">
                    <label for="racer-8" class="ui-radio-label-customized">马尔多纳多</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >迈凯轮车队</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right">
                    <input name="racerChoice" id="racer-9" type="radio" value="迈凯轮-Jenson Button">
                    <label for="racer-9" class="ui-radio-label-customized">巴顿</label>
                    <input name="racerChoice" id="racer-10" type="radio" value="迈凯轮-Kevin Magnussen">
                    <label for="racer-10" class="ui-radio-label-customized">麦奴逊</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >印度力量车队</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right">
                    <input name="racerChoice" id="racer-11" type="radio" value="印度力量-Nico Hulkenberg">
                    <label for="racer-11" class="ui-radio-label-customized">胡肯伯格</label>
                    <input name="racerChoice" id="racer-12" type="radio" value="印度力量-Sergio Perez">
                    <label for="racer-12" class="ui-radio-label-customized">佩雷兹</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >索伯车队</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right">
                    <input name="racerChoice" id="racer-13" type="radio" value="索伯-Adrian Sutil">
                    <label for="racer-13" class="ui-radio-label-customized">苏蒂尔</label>
                    <input name="racerChoice" id="racer-14" type="radio" value="索伯-Esteban Gutierrez">
                    <label for="racer-14" class="ui-radio-label-customized">古铁雷斯</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >红牛二队</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right">
                    <input name="racerChoice" id="racer-15" type="radio" value="红牛二队-Jean Eric Vergne">
                    <label for="racer-15" class="ui-radio-label-customized">维尔格尼</label>
                    <input name="racerChoice" id="racer-16" type="radio" value="红牛二队-Daniil Kvyat">
                    <label for="racer-16" class="ui-radio-label-customized">科维亚特</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >威廉姆斯车队</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right">
                    <input name="racerChoice" id="racer-17" type="radio" value="威廉姆斯-Felipe Massa">
                    <label for="racer-17" class="ui-radio-label-customized">马萨</label>
                    <input name="racerChoice" id="racer-18" type="radio" value="威廉姆斯-Valtteri Bottas">
                    <label for="racer-18" class="ui-radio-label-customized">博塔斯</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >玛鲁西亚车队</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right">
                    <input name="racerChoice" id="racer-19" type="radio" value="玛鲁西亚-Jules Bianchi">
                    <label for="racer-19" class="ui-radio-label-customized">比安奇</label>
                    <input name="racerChoice" id="racer-20" type="radio" value="玛鲁西亚-MaxAlexanderChilton">
                    <label for="racer-20" class="ui-radio-label-customized">齐尔顿</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >卡特汉姆车队</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right">
                    <input name="racer-1" id="racer-21" type="radio" value="卡特汉姆-Kamui Kobayashi">
                    <label for="racer-21" class="ui-radio-label-customized">小林可梦伟</label>
                    <input name="racerChoice" id="racer-22" type="radio" value="卡特汉姆-Marcus Ericsson">
                    <label for="racer-22" class="ui-radio-label-customized">埃里克森</label>
                </fieldset>
            </div>
            <div class="ui-btn-group-customized">
                <a class="ui-btn ui-corner-all ui-btn-inline ui-btn-l-customized" data-mini="true" data-inline="true"
                   href="info/instruction.html" data-transition="slide" data-ajax="false">查看活动详情</a>
                <a class="ui-btn ui-corner-all ui-btn-inline ui-btn-r-customized" data-mini="true" data-inline="true"
                   href="#pubPage" data-transition="slide" data-ajax="false">下  一  步</a>
            </div>
        </div>
    </div>
    <!--
    <div data-role="footer" data-position="fixed">
        <h4>页脚</h4>
    </div>
    -->
</div>

<div data-role="page" id="pubPage">
    <div data-role="content" data-position="fixed">
        <div align="center"><img src="images/top_pub.jpg" width="100%" border="0" hspace="0" vspace="0"/></div>
        <div class="custom-collapsibleset-bg"
             data-role="collapsibleset" data-inset="false" data-iconpos="right" data-expanded-icon="carat-d" data-collapsed-icon="carat-r">
            <div data-role="collapsible" data-collapsed="false">
                <h3 >上海</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right" >
                    <input name="pubChoice" id="pub-choice-1" type="radio" checked="checked" value="上海-K歌之王">
                    <label for="pub-choice-1" class="ui-radio-label-customized">K歌之王</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >杭州</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right">
                    <input name="pubChoice" id="pub-choice-2" type="radio" value="杭州-Linx">
                    <label for="pub-choice-2" class="ui-radio-label-customized">Linx</label>
                    <input name="pubChoice" id="pub-choice-3" type="radio" value="杭州-G+">
                    <label for="pub-choice-3" class="ui-radio-label-customized">G+</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >北京</h3>
                <fieldset data-role="controlgroup"  data-corners="false" data-iconpos="right">
                    <input name="pubChoice" id="pub-choice-4" type="radio" value="北京-Circle">
                    <label for="pub-choice-4" class="ui-radio-label-customized">Circle</label>
                    <input name="pubChoice" id="pub-choice-5" type="radio" value="北京-Babyface">
                    <label for="pub-choice-5" class="ui-radio-label-customized">Babyface</label>
                </fieldset>
            </div>
            <div data-role="collapsible">
                <h3 >深圳</h3>
                <fieldset data-role="controlgroup" data-corners="false" data-iconpos="right">
                    <input name="pubChoice" id="pub-choice-6" type="radio" value="深圳-LeNest">
                    <label for="pub-choice-6" class="ui-radio-label-customized">LeNest</label>
                </fieldset>
            </div>
            <div class="ui-input-purchase-code">
                <div class="ui-field-contain">
                    <label class="ui-input-label-customized" for="purchaseCode"></label>
                    <input class="ui-input-text-customized" style="text-transform: uppercase!important;"
                           name="purchaseCode" id="purchaseCode" type="text"  data-mini="true" placeholder="请输入购买码" value="">
                </div>
            </div>
            <div class="ui-btn-group-customized">
                <a class="ui-btn ui-corner-all ui-btn-inline ui-btn-l-customized" data-mini="true" data-inline="true"
                   href="#racerPage" data-transition="slide" data-ajax="false">返      回</a>
                <a class="ui-btn ui-corner-all ui-btn-inline ui-btn-r-customized" data-mini="true" data-inline="true"
                        href="#cellphonePage" data-transition="slide" data-ajax="false">下  一  步</a>
            </div>
        </div>
    </div>
</div>



<div data-role="page" id="cellphonePage">
    <div data-role="content" data-position="fixed">
        <div align="center"><img src="images/top_cell.jpg" width="100%" border="0" hspace="0" vspace="0"/></div>
        <div class="custom-collapsibleset-bg"
             data-role="collapsibleset" data-inset="false" data-iconpos="right" data-expanded-icon="carat-d" data-collapsed-icon="carat-r">
            <div class="ui-input-cellphone">
                <div class="ui-field-contain">
                    <label class="ui-input-label-customized" for="cellphone"></label>
                    <input class="ui-input-text-customized" name="cellphone" id="cellphone" type="text"  data-mini="true" placeholder="请输入您的电话号码" value=""
                           minlength="11" maxlength="11" required>
                </div>
            </div>
            <div class="ui-btn-group-customized">
                <a class="ui-btn ui-corner-all ui-btn-inline ui-btn-l-customized" data-mini="true" data-inline="true"
                    href="#pubPage" data-transition="slide" data-ajax="false">返      回</a>
                <a id="submitBtn" class="ui-btn ui-corner-all ui-btn-inline ui-btn-r-customized" data-mini="true" data-inline="true"
                    >提      交</a>
                <!--href="submitted.html" data-transition="slide" data-ajax="false"-->
            </div>
        </div>
    </div>
</div>
<div data-role="page" id="error" data-dismissible="false" data-close-btn="right"  class="ui-dialog-background-customized">
    <div data-role="header">
        <h1><span class="label label-danger">错误</span></h1>
    </div>
    <div data-role="content" class="ui-dialog-content-background-customized">
        <div class="ui-dialog-message-customized">
            <p><span id="errorMsg" class="ui-input-label-customized"></span></p>
        </div>
        <button class="ui-btn ui-shadow ui-corner-all ui-btn-customized" data-mini="true" data-inline="true" onclick="$('#error').dialog('close');">关    闭</button>
    </div>
</div>
<div data-role="page" id="fatal" data-dismissible="false" data-close-btn="right" class="ui-dialog-background-customized">
    <div data-role="header">
        <h1><span class="label label-danger">严重错误</span></h1>
    </div>
    <div data-role="content" class="ui-dialog-content-background-customized">
        <div class="ui-dialog-message-customized">
            <p><span id="fatalMsg" class="ui-input-label-customized"></span></p>
        </div>
        <button class="ui-btn ui-shadow ui-corner-all ui-btn-customized" data-mini="true" data-inline="true" onclick="$('#fatal').dialog('close');">关    闭</button>
    </div>
</div>
</form>
</body>
</html>